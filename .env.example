# ============================================
# CONFIGURACION PARA RAILWAY (PRODUCCION)
# ============================================
# Copia estas variables en Railway -> Variables -> RAW Editor

# ======================
# APLICACION
# ======================
APP_NAME=Interflow
APP_ENV=production
APP_DEBUG=false
APP_KEY=base64:qPmXQYhyMZL3R+lP79RIXkUbNN5C+qQvta17e9MbpQY=
APP_TIMEZONE=America/La_Paz
APP_URL=https://cobro-transporte-production-c773.up.railway.app

# ======================
# BASE DE DATOS MYSQL (Railway)
# ======================
# IMPORTANTE: Usa los valores de tu MySQL en Railway
DB_CONNECTION=mysql
DB_HOST=yamabiko.proxy.rlwy.net
DB_PORT=31069
DB_DATABASE=railway
DB_USERNAME=root
DB_PASSWORD=bRNdtzEvgeCKDITnwxMBWIrNzdtAfCge

# ======================
# SESION (Importante para evitar error 419)
# ======================
SESSION_DRIVER=file
SESSION_LIFETIME=120
SESSION_SECURE_COOKIE=true
SESSION_DOMAIN=.railway.app

# ======================
# CACHE Y SISTEMA
# ======================
CACHE_DRIVER=file
FILESYSTEM_DISK=local
QUEUE_CONNECTION=sync

# ======================
# BROADCASTING
# ======================
BROADCAST_DRIVER=log

# ======================
# LOGS
# ======================
LOG_CHANNEL=stack
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=error

# ======================
# SANCTUM (Autenticacion API)
# ======================
# IMPORTANTE: Actualiza con tu dominio real de Railway
SANCTUM_STATEFUL_DOMAINS=cobro-transporte-production-c773.up.railway.app,localhost,127.0.0.1

# ======================
# MAIL (Opcional)
# ======================
MAIL_MAILER=smtp
MAIL_HOST=
MAIL_PORT=
MAIL_USERNAME=
MAIL_PASSWORD=
MAIL_ENCRYPTION=
MAIL_FROM_ADDRESS=noreply@interflow.com
MAIL_FROM_NAME="${APP_NAME}"

# ======================
# AWS (Opcional)
# ======================
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=
AWS_USE_PATH_STYLE_ENDPOINT=false

# ======================
# PUSHER (Opcional)
# ======================
PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_HOST=
PUSHER_PORT=443
PUSHER_SCHEME=https
PUSHER_APP_CLUSTER=mt1

# ======================
# VITE
# ======================
VITE_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
VITE_PUSHER_HOST="${PUSHER_HOST}"
VITE_PUSHER_PORT="${PUSHER_PORT}"
VITE_PUSHER_SCHEME="${PUSHER_SCHEME}"
VITE_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"

# ======================
# REDIS (Opcional)
# ======================
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

# ======================
# GOOGLE MAPS API KEYS (OBLIGATORIO)
# ======================
# Obtener en: https://console.cloud.google.com/google/maps-apis
# 1. Habilitar: Maps JavaScript API, Maps SDK for Android
# 2. Crear API Key con restricciones:
#    - Web: Restricción HTTP con tu dominio
#    - Android: Restricción de app con SHA-1
# 3. Configurar las 3 variables abajo:

GOOGLE_MAPS_API_KEY_WEB=AIzaSyB1ZmOxDHBgVFwgi0GxXA85HR-cXf6sx8g
GOOGLE_MAPS_API_KEY_ANDROID=AIzaSyB1ZmOxDHBgVFwgi0GxXA85HR-cXf6sx8g
VITE_GOOGLE_MAPS_API_KEY=AIzaSyB1ZmOxDHBgVFwgi0GxXA85HR-cXf6sx8g

# ======================
# NIXPACKS BUILD COMMAND (IMPORTANTE)
# ======================
# Este comando se ejecuta durante el deployment en Railway
# Incluye: instalacion, migraciones, optimizacion, permisos y seeder
NIXPACKS_BUILD_CMD=composer install --no-dev --optimize-autoloader && npm install && npm run build && php artisan migrate --force && php artisan db:seed --force && php artisan optimize && chmod -R 775 storage && chmod -R 775 bootstrap/cache && php artisan storage:link
